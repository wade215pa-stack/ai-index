/* Tokens */
:root{
  --base: 16px;
  --scale: 1;
  --font: calc(var(--base) * var(--scale));
  --lh: 1.45;
  --pad: clamp(10px, 1.1rem, 24px);
  --gap: clamp(10px, 1rem, 20px);
  --radius: 14px;
  --fg: #e6f1e8;
  --bg: #0a0f0b;
  --muted: #a8b3ab;
  --accent: #5CFF7A; /* green glow */
  --accent-2: #8df3a3;
  --border: rgba(255,255,255,0.08);
  --shadow: 0 12px 32px rgba(0,0,0,0.45);
}

/* Reset */
* { box-sizing: border-box; }
html, body { height: 100%; }
body{
  margin:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
  background: var(--bg); color: var(--fg); line-height: var(--lh);
  font-size: var(--font);
}
a { color: var(--accent); text-decoration: none; }
a:focus { outline: 2px dashed var(--accent); outline-offset: 4px; }
.skip{ position: absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
.skip:focus{ left: 16px; top: 16px; width: auto; height:auto; padding:6px 10px; background:#000; border-radius: 8px; }

/* Age adaptation */
body.age-teen{ --scale: 1.05; }
body.age-adult{ --scale: 1.0; }
body.age-senior{
  --scale: 1.25;
  --lh: 1.6;
  --pad: clamp(14px, 1.4rem, 28px);
  --gap: clamp(14px, 1.4rem, 28px);
}

/* High contrast */
body.high-contrast{
  --fg: #ffffff; --bg: #000000; --border: rgba(255,255,255,0.22);
}

/* Motion */
@media (prefers-reduced-motion: reduce){ #matrixRain{ display:none !important; } }
body.reduce-motion #matrixRain{ display:none !important; }

/* Matrix background container */
#bg{ position: fixed; inset:0; overflow:hidden; z-index:0; }

/* Card container */
.card{
  position: relative; z-index: 1;
  max-width: 1000px; margin: 6vh auto;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: calc(var(--pad) * 1.25);
  box-shadow: var(--shadow);
  backdrop-filter: blur(8px);
}

/* Ghost emblem watermark under the form (with pulse) */
.card{ position: relative; }
.card::before{
  content: "";
  position: absolute;
  inset: 0;
  background:
    center / min(70vmin, 820px) no-repeat
    image-set(
      url("assets/logo_matrix.webp") type("image/webp"),
      url("assets/logo_matrix.png") type("image/png")
    );
  opacity: 0.12;
  mix-blend-mode: screen;
  pointer-events: none;
  z-index: 0;
  filter: blur(0.2px);
  animation: watermarkPulse 6s ease-in-out infinite;
}
@keyframes watermarkPulse {
  0%   { opacity: 0.10; filter: blur(0.3px); }
  50%  { opacity: 0.16; filter: blur(0.15px); }
  100% { opacity: 0.10; filter: blur(0.3px); }
}
/* Ensure content above watermark */
.card > *{ position: relative; z-index: 1; }

/* Brand */
.brand{ text-align:center; margin-bottom: calc(var(--pad) * 0.75); }
.logo{
  width: clamp(80px, 12vw, 160px);
  opacity: 0.85;
  display: block; margin: 0 auto var(--gap);
  mix-blend-mode: screen;
  filter: drop-shadow(0 0 16px rgba(92,255,122,0.5));
}
.brand h1{ margin: 0 0 6px; font-size: clamp(1.3rem, 3.2vw, 2rem); }
.tag{ margin: 0 0 10px; color: var(--muted); }
.linklike{ background:none; border:none; color: var(--accent); cursor:pointer; text-decoration: underline; font-size: 0.95em; }

/* Quick toggles */
.quick-toggles{ display:flex; gap: 8px; flex-wrap: wrap; justify-content: center; margin-bottom: var(--gap); }
.pill{
  background: rgba(92,255,122,0.1); border: 1px solid var(--accent);
  padding: 8px 12px; border-radius: 999px; color: var(--fg); cursor: pointer;
  box-shadow: 0 0 12px rgba(92,255,122,0.25) inset;
}
.pill[aria-pressed="true"]{ background: rgba(92,255,122,0.22); }

/* Layout rows */
.row{ display:grid; gap: var(--gap); margin-bottom: var(--gap); }
.row.two{ grid-template-columns: 1fr; }
@media (min-width: 720px){ .row.two{ grid-template-columns: 1fr 1fr; } }

/* Inputs â€” neon red typing */
label{ display:block; margin-bottom: 6px; color: #e6f1e8; }
input[type="text"], input[type="number"], select, textarea{
  width:100%; background: rgba(255,255,255,0.06); color: #ff3b3b;
  border: 1px solid rgba(255,59,59,0.55); border-radius: 10px; padding: 10px 12px;
  caret-color: #ff3b3b;
  transition: box-shadow .15s ease, border-color .15s ease, background .15s ease;
}
input::placeholder, textarea::placeholder{ color: rgba(255,200,200,0.55); }
input:focus, select:focus, textarea:focus{
  outline: none; border-color: #ff3b3b;
  box-shadow: 0 0 14px rgba(255,59,59,0.65), 0 0 28px rgba(255,59,59,0.35);
  background: rgba(255,59,59,0.08);
}
/* Emphasize brand input */
#brandName{ font-weight: 700; letter-spacing: 0.5px; }

/* Fieldsets/choices */
fieldset{ border: 1px solid var(--border); border-radius: 12px; padding: var(--pad); margin-bottom: var(--gap); }
legend{ padding: 0 8px; font-weight: 600; }
.choices{ display: grid; gap: 8px; }
.grid{ grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); }
.check, .radio{ display:flex; gap: 8px; align-items:center; background: rgba(255,255,255,0.04);
  border:1px solid var(--border); border-radius: 10px; padding: 10px; }
.check input, .radio input{ transform: scale(1.1); }

/* Actions */
.actions{ display:flex; gap: 10px; align-items:center; flex-wrap: wrap; }
.cta{
  background: var(--accent); color:#001d07; border:none; border-radius: 999px;
  padding: 12px 18px; font-weight: 700; cursor: pointer;
  box-shadow: 0 0 24px rgba(92,255,122,0.45), 0 2px 0 #2ec954 inset;
  transition: transform .06s ease, box-shadow .2s ease;
}
.cta:active{ transform: translateY(1px); box-shadow: 0 0 16px rgba(92,255,122,0.35), 0 2px 0 #26b14a inset; }

.hint, .muted{ color: var(--muted); }
.small{ font-size: 0.9em; }
.soft{ margin-top: 10px; padding-top: 6px; border-top: 1px dashed var(--border); }

/* Dropdown checklists */
details.dropdown{ background: rgba(255,255,255,0.04); border:1px solid var(--border); border-radius: 10px; padding: 8px 12px; }
details.dropdown summary{ cursor: pointer; list-style: none; }
details.dropdown[open] summary{ margin-bottom: 8px; }

/* Modal */
.modal{ position: fixed; inset: 0; display:flex; align-items:center; justify-content:center; background: rgba(0,0,0,0.6); z-index: 999; }
.modal.hidden{ display:none; }
.modal-content{
  width: min(680px, 92vw);
  background: #0b150e; border: 1px solid var(--accent-2); border-radius: 14px;
  padding: calc(var(--pad) * 1.2);
  box-shadow: 0 22px 60px rgba(0,0,0,0.6);
}
.modal-content h2{ margin-top:0; }
.status{ min-height: 1.2em; }

/* === 4D Matrix Rain === */
#matrixRain{
  position: fixed; inset:0; pointer-events:none; z-index:0;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  color: #5CFF7A;
  opacity: 0.9;
  filter: drop-shadow(0 0 10px rgba(92,255,122,0.95));
}
.stream{ position:absolute; top:-120vh; will-change: transform, opacity; white-space: pre; font-variant-ligatures: none; }
.stream.accent-red{ color: #ff3b3b; text-shadow: 0 0 10px rgba(255,59,59,0.95), 0 0 16px rgba(255,59,59,0.6); }
.layer-1 .stream{ font-size: 16px; opacity: .45; }
.layer-2 .stream{ font-size: 20px; opacity: .75; }
.layer-3 .stream{ font-size: 26px; opacity: .95; }

@keyframes fallFast { from{ transform: translateY(-120vh) } to{ transform: translateY(120vh) } }
@keyframes fallMed  { from{ transform: translateY(-120vh) } to{ transform: translateY(120vh) } }
@keyframes fallSlow { from{ transform: translateY(-120vh) } to{ transform: translateY(120vh) } }
